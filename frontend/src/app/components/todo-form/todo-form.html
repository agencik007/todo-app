<div class="todo-form-container">
  <h2 class="todo-form-title">
    {{ todo() ? 'Edytuj zadanie' : 'Dodaj nowe zadanie' }}
  </h2>

  <form (ngSubmit)="onSubmit()" class="todo-form">
    <div class="form-group">
      <label for="title" class="form-label">
        TytuÅ‚ *
      </label>
      <input
        id="title"
        type="text"
        [(ngModel)]="title"
        name="title"
        required
        placeholder="Wpisz tytuÅ‚ zadania..."
        class="form-input"
        [class.error]="!title().trim()">
      @if (!title().trim()) {
        <p class="form-error">TytuÅ‚ jest wymagany</p>
      }
    </div>

    <div class="form-group">
      <label for="description" class="form-label">
        Opis
      </label>
      <textarea
        id="description"
        [(ngModel)]="description"
        name="description"
        rows="4"
        placeholder="Dodaj opcjonalny opis..."
        class="form-textarea">
      </textarea>
    </div>

    <div class="form-actions">
      <button
        type="submit"
        [disabled]="isSubmitting() || !title().trim()"
        class="form-submit-btn">
        @if (isSubmitting()) {
          <div class="spinner"></div>
          Zapisywanie...
        } @else {
          <span class="text-lg">{{ todo() ? 'ðŸ’¾' : 'âž•' }}</span>
          {{ todo() ? 'Zapisz zmiany' : 'Dodaj zadanie' }}
        }
      </button>

      <button
        type="button"
        (click)="onCancel()"
        class="form-cancel-btn">
        Anuluj
      </button>
    </div>
  </form>
</div>
